{"version":3,"file":"static\\development\\pages\\news.js","sources":["webpack:///webpack/bootstrap","webpack:///./components/SearchForm.js","webpack:///./pages/news.js","webpack:///external \"@babel/runtime/regenerator\"","webpack:///external \"isomorphic-unfetch\"","webpack:///external \"next/link\"","webpack:///external \"react\"","webpack:///external \"react-dropdown\"","webpack:///external \"react-select\"","webpack:///external \"styled-jsx/style\""],"sourcesContent":[" \t// The module cache\n \tvar installedModules = require('../../../ssr-module-cache.js');\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tvar threw = true;\n \t\ttry {\n \t\t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n \t\t\tthrew = false;\n \t\t} finally {\n \t\t\tif(threw) delete installedModules[moduleId];\n \t\t}\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","// Import Dependencies\nimport React, { Component } from \"react\";\n\n\nimport Select from 'react-select';\n\n\n\n\n// Array for dropdown\nconst options = [\n  { value: 'top-headlines?country=ie', label: 'top-headlines' ,},\n  { value: 'business', label: 'Business News',\n    value: 'everything?q=technology' ,label: 'Tech news' }\n];\n\n//\n// Define SearchForm Class\n//\nexport default class SearchForm extends Component {\n  // constructor accepts props and initialises state\n  constructor(props) {\n    super(props);\n\n    this.state = {selectedOption: null};\n \n    \n    this.handleChange = (selectedOption) => {\n    this.setState({ selectedOption });\n    console.log(`Option selected:`, selectedOption);\n  }\n}\n\n  //\n  // an event handler for form submit\n  //\n  formSubmitted = event => {\n    // Validate input value\n    if (event.target.newsSource.value != \"\") {\n      this.props.setNewsSource(event.target.newsSource.value);\n    }\n    // prevent page reload (prevent submit)\n    event.preventDefault();\n  };\n\n  // Render the form\n  render() {\n    const {selectedOption} = this.state;\n    return (\n      \n\n      <div>\n        {/* Search Input */}\n        <div id=\"search\">\n          {/* Note event handler */}\n          <form onSubmit={this.formSubmitted}>\n            {/* The input field */}\n\n            \n\n\n            <input\n              name=\"newsSource\"\n              placeholder=\"News Source name\"\n              type=\"text\"\n            />\n            {/* Button click will trigger submit */}\n            <button>Update News</button>\n          </form>\n        </div>\n        <style jsx>{`\n           input {\n                \n               margin-top:10px;\n               margin-left:100px;\n               text-align:center;\n            }\n            \n        `}</style>\n      </div>\n      \n    );\n    \n  }\n}\n","// Passing from child to parent\n// https://www.robinwieruch.de/react-pass-props-to-component/#react-props\n\n//\n// Imports\n//\n\n// This is the Link API\nimport Link from 'next/link';\n\n// Import fetch library\nimport fetch from 'isomorphic-unfetch';\n// mport SearchForm Component\nimport SearchForm from '../components/SearchForm';\nimport React from 'react';\nimport Select from 'react-select';\n//(free version) API key from  https://newsapi.org/\n// Get your own key!\nconst apiKey = 'c1b73b50268e4a0fab20976201d64abf';\nimport Dropdown from 'react-dropdown'\n// Initial News source\nconst defaultNewsSource = 'the-irish-times';\n\nconst options = [\n  { value: 'top-headlines?country=ie', label: 'top-headlines' ,},\n  { value: 'business', label: 'Business News',\n    value: 'everything?q=technology' ,label: 'Tech news' }\n];\n\n\n\n//\n// async method fetches and returns data from a url\n//\nasync function getNews(url) {\n\n  // try fetch and catch any errors\n  try {\n    // Make async call\n    const res = await fetch(url);\n    // get json data when it arrives\n    const data = await res.json();\n    // return json data\n    return (data);\n  } catch (error) {\n    // return error if it occurs\n    return (error);\n  }\n}\n\n//\n//  The News page defined as an ES6 Class\n//\nexport default class News extends React.Component {\n\n  // Constructor\n  // Recieve props and initialise state properties\n  constructor(props) {\n    super(props)\n    this.state = {\n      newsSource: \"\",\n      url: \"\",\n      articles: [],\n      selectedOption: null\n    }\n    \n    this.handleChange = (selectedOption) => {\n      this.setState({ selectedOption });\n      console.log(`Option selected:`, selectedOption);\n    }\n\n\n  }\n  \n  // This function is passed to the SearchForm and used the get the value entered\n  // This value will be used to generate the api url\n  setNewsSource = (input) => {\n    this.setState({\n      newsSource: input,\n      url: `https://newsapi.org/v2/everything?q=${input}&apiKey=${apiKey}`\n    })\n  }\n\n \n  searchNewsAPI = (event) => {\n    this.setState({\n      newsSource: `${event.target.innerText}`,\n      url: `https://newsapi.org/v2/everything?q=${event.target.innerText}&apiKey=${apiKey}`\n    })\n    console.log(this.state.url);\n  }\n\n  //\n  // render() method generates the page\n  //\n  render() {\n\n    // if state.articles is empty copy props to it\n    if (this.state.articles.length == 0) {\n      this.state.articles = this.props.articles;\n    }\n    return (\n      \n      <div>\n        \n        { }\n        { }\n        <SearchForm setNewsSource={this.setNewsSource} />\n       \n        {}\n    \n    \n      \n        <ul className=\"newsMenu\">\n          <li><a href=\"#\" onClick={this.searchNewsAPI} name=\"top-headlines?country=ie\">Top Headlines Ireland</a></li>\n          <li><a href=\"#\" onClick={this.searchNewsAPI} name=\"top-headlines?country=ie&category=business\">Business News Ireland</a></li>\n          <li><a href=\"#\" onClick={this.searchNewsAPI} name=\"everything?q=technology\">Technology News</a></li>\n          <li><a href=\"#\" onClick={this.searchNewsAPI} name=\"top-headlines?country=ie&category=weather\">Weather in Ireland</a></li>\n        </ul>\n      \n   \n\n   \n   \n        { /* Display a title based on source */}\n        <h3>{this.state.newsSource.split(\"-\").join(\" \")}</h3>\n        <div>\n          { /* Iterate through articles using Array map) */}\n          { /* Display author, publishedAt, image, description, and content */}\n          { /* for each story. Also a link for more.. */}\n          { /* the map index property gives the position in the array for each article - see the link below */}\n          {this.state.articles.map((article, index) => (\n            <section key={index}>\n              <h3>{article.title}</h3>\n              <p className=\"author\">{article.author}{this.formatDate( article.publishedAt)}</p>\n              <img src={article.urlToImage} alt=\"article image\" className=\"img-article\"></img>\n              <p>{article.description}</p>\n              <p>{article.content}</p>\n              <p><Link as={`/article/${index}`} href={`/article?id=${index}`}><a>Read More</a></Link></p>\n            </section>\n          ))}\n        </div>\n\n        <style jsx>{`\n              /* CSS for this page */\n              section {\n                max-width:1485px;  \n                border: 1px solid gray;\n                background-color: rgb(240, 248, 255);\n                padding: 1em;\n                margin-top: 10px;\n                margin-left: 36px;\n                margin-right: 36px;;\n                text-align: center;\n              }\n\n            .author {\n                font-style: italic;\n                font-size: 0.8em;\n              }\n            .img-article {\n                max-width: 50%;\n              }\n\n            .newsMenu {\n              display: flex;\n              flex-direction: row;\n              margin: 0;\n              padding: 0;\n              margin-top: 20px;\n              margin-left: 30em;\n            }\n            .newsMenu li {\n              display: inline-table;\n              padding-left: 20px;\n            }\n\n            .newsMenu li a {\n              font-size: 1em;\n              color: blue;\n              display: block;\n              text-decoration: none;\n            }\n\n            .newsMenu li a:hover {\n              color: rgb(255, 187, 0);\n              text-decoration: underline;\n            }\n           \n           \n            \n          \n            .dropdown .dropbtn {\n              font-size: 16px; \n              border: none;\n              outline: none;\n              color: white;\n              padding: 14px 16px;\n              background-color: inherit;\n              \n              margin: 0; \n            }\n            \n           \n            .navbar a:hover, .dropdown:hover .dropbtn {\n              background-color: red;\n            }\n            \n            \n            .dropdown-content {\n              display: none;\n              position: absolute;\n              background-color: #f9f9f9;\n              min-width: 160px;\n              box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n              z-index: 1;\n            }\n            \n            \n            .dropdown-content a {\n              float: none;\n              color: black;\n              padding: 12px 16px;\n              text-decoration: none;\n              display: block;\n              text-align: left;\n            }\n            \n            \n            .dropdown-content a:hover {\n              background-color: #ddd;\n            }\n            \n           \n            .dropdown:hover .dropdown-content {\n              display: block;\n            }\n            .newsMenu {\n              display: flex;\n              flex-direction: row;\n              margin: 0;\n              padding: 0;\n              margin-top: 20px;\n              margin-left: 30em;\n            }\n            .newsMenu li {\n              display: inline-table;\n              padding-left: 20px;\n            }\n \n            .newsMenu li a {\n              font-size: 1em;\n              color: blue;\n              display: block;\n              text-decoration: none;\n            }\n \n            .newsMenu li a:hover {\n              color: rgb(255, 187, 0);\n              text-decoration: underline;\n            }\n          `}</style>\n      </div>\n    );\n  }\n  \n    \n  static async getInitialProps(response) {\n    const defaultUrl = `https://newsapi.org/v2/top-headlines?sources=${defaultNewsSource}&apiKey=${apiKey}`;\n\n    // Get news data from the api url\n    const data = await getNews(defaultUrl);\n\n    // If the result contains and articles array then it is good so return articles\n    if (Array.isArray(data.articles)) {\n      return {\n        articles: data.articles\n      }\n    }\n    // Otherwise it contains an error, log and redirect to error page (status code 400)\n    else {\n      console.error(data)\n   \n    }\n  }\n\n  async componentDidUpdate(prevProps, prevState) {\n\n    // Check if newsSource url has changed to avoid unecessary updates \n    if (this.state.url !== prevState.url) {\n\n      // Use api url (from state) to fetch data and call getNews()\n      const data = await getNews(this.state.url);\n\n      // If the result contains and articles array then it is good so update articles\n      if (Array.isArray(data.articles)) {\n        // Store articles in state\n        this.state.articles = data.articles;\n        // Force page update by changing state (make sure it happens!)\n        this.setState(this.state);\n      }\n      // Otherwise it contains an error, log and redirect to error page (status code 400)\n      else {\n        console.error(data)\n       \n      }\n    }\n  } // End componentDidUpdate\n\n  formatDate = (input) => {\n    let date = new Date(input);\n    var week = new Array('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday');\n    var months = new Array('January', 'February', 'March', 'April', 'May', 'June', 'July','August','September','October', 'November', 'December');\n    var day  = week[date.getDay()];\n    let month = months[date.getMonth()];\n    let year = date.getFullYear();\n    let hours = date.getHours();\n    let mins = date.getMinutes().toString().padStart(2,'0');\n    let secs = date.getSeconds();\n   \n    let output =  `${day} ${month} ${year} ${hours}:${mins} ${secs}s`;\n\n   \n   return output.toString();\n  }\n\n} \n\n\n","module.exports = require(\"@babel/runtime/regenerator\");","module.exports = require(\"isomorphic-unfetch\");","module.exports = require(\"next/link\");","module.exports = require(\"react\");","module.exports = require(\"react-dropdown\");","module.exports = require(\"react-select\");","module.exports = require(\"styled-jsx/style\");"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxFA;AACA;AAGA;AACA;AAKA;AACA;AAAA;AAAA;AACA;AAAA;AAFA;AAOA;AACA;AACA;AAAA;;;;;AACA;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAgBA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AApBA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAVA;AAUA;AAGA;AACA;AACA;AACA;;;AAQA;AACA;AAAA;AAEA;AAGA;AAAA;AAEA;AAAA;AAAA;AAEA;AAAA;AAAA;AAOA;AACA;AACA;AAHA;AAAA;AAMA;AAAA;AAhBA;AAAA;AAAA;AAgCA;;;;AAhEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpBA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAFA;AASA;AACA;AACA;AAAA;;AAgBA;AACA;AACA;AACA;AACA;;;;AApBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAKA;AALA;AAAA;AACA;AADA;AAOA;AAPA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AAmBA;;;;;AAEA;AACA;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAoBA;AACA;AACA;AAFA;AAIA;AACA;AAzBA;AA4BA;AACA;AACA;AAFA;AACA;AAGA;AACA;AACA;AAlCA;AA6PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AA1QA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAbA;AAeA;AAGA;AACA;AACA;;;AAeA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAIA;AAAA;AAMA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AACA;AAAA;AAKA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAPA;AA5BA;AAAA;AAAA;AAiKA;;;;;;AAsBA;;;;;;AAGA;;;;;;AAGA;AACA;;AADA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAQA;AAEA;AACA;;;;;;;;;;;;;;AACA;AACA;;;;;;AAzCA;;;;;;AACA;AACA;;AAEA;AACA;;AADA;AACA;AAEA;;;;;AACA;AACA;AADA;AACA;;AAKA;AACA;;;;;;;;;;;;;;;;;;AArOA;AACA;;;;;;;;;;;;;;;;;;;;;;;;ACtDA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;A","sourceRoot":""}